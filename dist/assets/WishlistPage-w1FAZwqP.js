import{r as l,l as v,n as w,o as N,d as f,$ as I,j as e,m as n,L as h,G as b,a0 as A,a1 as F,H as S,c as C,a2 as H}from"./index-Fyb7nwRQ.js";function k(){const[r,o]=l.useState([]),[m,x]=l.useState(!0),{isLoggedIn:d}=v(),{addItem:p}=w(),c=N(),g=f();l.useEffect(()=>{if(!d){g("/login");return}_()},[d]);const _=async()=>{try{const s=await I();o((s==null?void 0:s.items)||(s==null?void 0:s.products)||(s==null?void 0:s.item)||(Array.isArray(s)?s:[]))}catch(s){console.error(s)}finally{x(!1)}},j=async s=>{try{await H(s.id,!1),o(a=>a.filter(i=>i.id!==s.id)),c.success("Removed from wishlist")}catch(a){c.error(a.message||"Failed to remove")}},u=async(s,a)=>{a.preventDefault();try{await p({item_id:s.id,price:String(s.price||0),quantity:1,variation:[],add_on_ids:[],add_on_qtys:[],model:"Item"}),c.success(`${s.name} added to cart!`)}catch(i){c.error(i.message||"Failed to add to cart")}},y=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(s||0);return e.jsxs("main",{className:"wishlist-page",children:[e.jsx("section",{className:"wishlist-page__hero",children:e.jsx("div",{className:"container",children:e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"wishlist-page__title",children:"My Wishlist"}),e.jsxs("p",{className:"wishlist-page__subtitle",children:[r.length," item",r.length!==1?"s":""," saved"]})]})})}),e.jsx("section",{className:"wishlist-page__content section",children:e.jsx("div",{className:"container",children:m?e.jsx("div",{className:"wishlist-grid",children:[1,2,3,4].map(s=>e.jsx("div",{className:"wishlist-skeleton"},s))}):r.length===0?e.jsxs("div",{className:"wishlist-empty",children:[e.jsx("div",{className:"wishlist-empty__icon",children:"❤️"}),e.jsx("h3",{children:"Your wishlist is empty"}),e.jsx("p",{children:"Start adding items you love!"}),e.jsx(h,{to:"/products",children:e.jsx(b,{size:"lg",children:"Browse Products"})})]}):e.jsx("div",{className:"wishlist-grid",children:e.jsx(A,{children:r.map((s,a)=>{var i;return e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:a*.03},children:e.jsxs(h,{to:`/products/${s.id}`,className:"wl-card hover-lift",children:[e.jsxs("div",{className:"wl-card__image hover-zoom",children:[e.jsx("img",{src:s.image_full_url||s.image||"/assets/image/placeholder.png",alt:s.name,onError:t=>t.target.src="/assets/image/placeholder.png"}),e.jsx("button",{className:"wl-card__remove",onClick:t=>{t.preventDefault(),j(s)},children:e.jsx(F,{size:16})})]}),e.jsxs("div",{className:"wl-card__body",children:[e.jsx("span",{className:"wl-card__store",children:s.store_name||""}),e.jsx("h3",{className:"wl-card__name",children:s.name}),e.jsxs("div",{className:"wl-card__rating",children:[e.jsx(S,{style:{color:"#f59e0b"}}),e.jsxs("span",{children:[((i=s.avg_rating)==null?void 0:i.toFixed(1))||"0.0"," (",s.rating_count||0,")"]})]}),e.jsxs("div",{className:"wl-card__footer",children:[e.jsx("span",{className:"wl-card__price",children:y(s.price)}),e.jsxs(n.button,{className:"wl-card__cart",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t=>u(s,t),children:[e.jsx(C,{size:16})," Add"]})]})]})]})},s.id)})})})})})]})}export{k as default};
