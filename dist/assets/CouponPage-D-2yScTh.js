import{r as a,j as e}from"./index-BL3vTOoB.js";import{F as x,a as u,b as m,c as h}from"./index-BHTaDdxo.js";import{f as j}from"./coupons-BuziIPNb.js";const C=()=>{const[c,t]=a.useState([]),[r,o]=a.useState(!0),[i,n]=a.useState(null);a.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const s=await j();t(Array.isArray(s)?s:(s==null?void 0:s.coupons)||(s==null?void 0:s.data)||[])}catch(s){console.error("Failed to load coupons",s)}finally{o(!1)}},d=s=>{navigator.clipboard.writeText(s),n(s),setTimeout(()=>n(null),2e3)};return e.jsxs("div",{className:"coupon-page",children:[e.jsx("section",{className:"coupon-page__hero",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"My Coupons"}),e.jsx("p",{className:"coupon-page__subtitle",children:"Use these coupons to get discounts on your orders"})]})}),e.jsx("section",{className:"container coupon-page__body",children:r?e.jsx("div",{className:"coupon-skeletons",children:[...Array(4)].map((s,p)=>e.jsx("div",{className:"coupon-skeleton"},p))}):c.length===0?e.jsxs("div",{className:"coupon-empty",children:[e.jsx(x,{size:48}),e.jsx("h3",{children:"No Coupons Available"}),e.jsx("p",{children:"Check back later for exciting offers!"})]}):e.jsx("div",{className:"coupon-grid",children:c.map(s=>e.jsxs("div",{className:"coupon-card",children:[e.jsxs("div",{className:"coupon-card__left",children:[e.jsx("span",{className:"coupon-discount",children:s.discount_type==="percent"?`${s.discount}% OFF`:`₹${s.discount} OFF`}),s.max_discount&&s.discount_type==="percent"&&e.jsxs("span",{className:"coupon-max",children:["Up to ₹",s.max_discount]})]}),e.jsxs("div",{className:"coupon-card__right",children:[e.jsxs("div",{className:"coupon-card__header",children:[e.jsx("span",{className:"coupon-code",children:s.code}),e.jsxs("button",{className:"coupon-copy-btn",onClick:()=>d(s.code),children:[i===s.code?e.jsx(u,{}):e.jsx(m,{}),i===s.code?"Copied":"Copy"]})]}),s.title&&e.jsx("p",{className:"coupon-title",children:s.title}),s.min_purchase>0&&e.jsxs("p",{className:"coupon-min",children:["Min. order: ₹",s.min_purchase]}),s.expire_date&&e.jsxs("p",{className:"coupon-expiry",children:[e.jsx(h,{size:12})," Expires: ",new Date(s.expire_date).toLocaleDateString()]})]})]},s.id))})})]})};export{C as default};
