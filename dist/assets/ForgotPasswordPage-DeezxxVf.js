import{r,d as L,j as e,m as z,e as q,g as V,G as f,h as v,L as B,i as F,v as H,k as D}from"./index-BS7-dLVL.js";function M(){const[i,b]=r.useState(1),[a,y]=r.useState("phone"),[u,w]=r.useState("+91"),[m,N]=r.useState(""),[p,P]=r.useState(""),[g,_]=r.useState(""),[j,S]=r.useState(""),[x,k]=r.useState(""),[l,c]=r.useState(!1),[d,o]=r.useState(""),[C,O]=r.useState(""),R=L(),T=async s=>{s.preventDefault(),o(""),c(!0);try{const h={phone:a==="phone"?`${u}${m.replace(/\s/g,"")}`:"",email:a==="email"?p:"",verification_method:a},n=await F(h);n.errors?o(Object.values(n.errors).flat().join(". ")):b(2)}catch(t){o(t.message||"Failed to send OTP")}finally{c(!1)}},E=async s=>{s.preventDefault(),o(""),c(!0);try{const h={phone:a==="phone"?`${u}${m.replace(/\s/g,"")}`:"",email:a==="email"?p:"",verification_method:a,reset_token:g},n=await H(h);n.errors?o(Object.values(n.errors).flat().join(". ")):(O(n.token||g),b(3))}catch(t){o(t.message||"OTP verification failed")}finally{c(!1)}},$=async s=>{if(s.preventDefault(),o(""),j!==x){o("Passwords do not match");return}c(!0);try{const t=a==="phone"?`${u}${m.replace(/\s/g,"")}`:"",n=await D({_method:"put",reset_token:C,phone:t,email:a==="email"?p:"",verification_method:a,password:j,confirm_password:x});n.errors?o(Object.values(n.errors).flat().join(". ")):R("/login")}catch(t){o(t.message||"Password reset failed")}finally{c(!1)}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-page__container",children:e.jsxs(z.div,{className:"login-page__card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"login-page__header",children:[e.jsx("img",{src:"/assets/image/thg-logo.png",alt:"THG",className:"login-page__logo"}),e.jsx("h1",{children:i===1?"Forgot Password":i===2?"Verify OTP":"Reset Password"}),e.jsx("p",{children:i===1?"Enter your registered email or phone":i===2?"Enter the code sent to you":"Create a new password"})]}),i===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"login-page__tabs",children:[e.jsx("button",{className:`login-page__tab ${a==="phone"?"active":""}`,onClick:()=>y("phone"),children:"Phone"}),e.jsx("button",{className:`login-page__tab ${a==="email"?"active":""}`,onClick:()=>y("email"),children:"Email"})]}),e.jsxs("form",{className:"login-page__form",onSubmit:T,children:[d&&e.jsx("div",{style:{color:"#ef4444",background:"rgba(239,68,68,0.1)",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.9rem"},children:d}),a==="phone"?e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(q,{className:"input-icon"}),e.jsxs("select",{className:"country-code-select",value:u,onChange:s=>w(s.target.value),children:[e.jsx("option",{value:"+91",children:"ðŸ‡®ðŸ‡³ +91"}),e.jsx("option",{value:"+1",children:"ðŸ‡ºðŸ‡¸ +1"}),e.jsx("option",{value:"+44",children:"ðŸ‡¬ðŸ‡§ +44"}),e.jsx("option",{value:"+971",children:"ðŸ‡¦ðŸ‡ª +971"}),e.jsx("option",{value:"+880",children:"ðŸ‡§ðŸ‡© +880"}),e.jsx("option",{value:"+61",children:"ðŸ‡¦ðŸ‡º +61"}),e.jsx("option",{value:"+81",children:"ðŸ‡¯ðŸ‡µ +81"})]}),e.jsx("input",{type:"tel",placeholder:"98765 43210",value:m,onChange:s=>N(s.target.value),required:!0})]})]}):e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(V,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"john@example.com",value:p,onChange:s=>P(s.target.value),required:!0})]})]}),e.jsx(f,{type:"submit",size:"lg",block:!0,disabled:l,children:l?"Sending...":"Send OTP"})]})]}),i===2&&e.jsxs("form",{className:"login-page__form",onSubmit:E,children:[d&&e.jsx("div",{style:{color:"#ef4444",background:"rgba(239,68,68,0.1)",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.9rem"},children:d}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Verification Code"}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(v,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Enter OTP",value:g,onChange:s=>_(s.target.value),required:!0,maxLength:6})]})]}),e.jsx(f,{type:"submit",size:"lg",block:!0,disabled:l,children:l?"Verifying...":"Verify OTP"})]}),i===3&&e.jsxs("form",{className:"login-page__form",onSubmit:$,children:[d&&e.jsx("div",{style:{color:"#ef4444",background:"rgba(239,68,68,0.1)",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.9rem"},children:d}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"New Password"}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(v,{className:"input-icon"}),e.jsx("input",{type:"password",placeholder:"New password",value:j,onChange:s=>S(s.target.value),required:!0,minLength:6})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirm Password"}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(v,{className:"input-icon"}),e.jsx("input",{type:"password",placeholder:"Confirm password",value:x,onChange:s=>k(s.target.value),required:!0,minLength:6})]})]}),e.jsx(f,{type:"submit",size:"lg",block:!0,disabled:l,children:l?"Resetting...":"Reset Password"})]}),e.jsx("div",{className:"login-page__footer",children:e.jsxs("p",{children:["Remember your password? ",e.jsx(B,{to:"/login",children:"Sign In"})]})})]})})})}export{M as default};
